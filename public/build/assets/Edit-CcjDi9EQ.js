import{u as c,c as l,o,a as r,g as a,e,t as i,f as d,k as b,F as k,r as w,v as g,b as _,w as V,d as U,l as N,h}from"./app-CtvwbKAl.js";const R={class:"max-w-7xl mx-auto space-y-8 text-admin-text"},S={class:"space-y-4"},E={key:0},F=["src"],D={class:"space-y-2"},O={key:0,class:"text-red-500 text-sm"},B={key:0,class:"space-y-4"},C=["value"],M={key:0,class:"text-red-500 text-sm"},j={class:"space-y-4"},T={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},q={key:0,class:"text-red-500 text-sm"},A={key:1,class:"text-red-500 text-sm"},L={key:0,class:"text-red-500 text-sm"},$={key:1,class:"text-red-500 text-sm"},z={key:0,class:"text-red-500 text-sm"},G={key:1,class:"text-red-500 text-sm"},H={class:"flex gap-2"},J={__name:"Edit",props:{category:{type:Object,required:!0},parents:{type:Array,default:()=>[]}},setup(x){const m=x,p=(u,t)=>{var n;return((n=m.category.translations.find(f=>f.language===u))==null?void 0:n[t])||""},s=c({parent_id:m.category.parent_id,image:null,translations:{ru:{name:p("ru","name"),slug:p("ru","slug")},ro:{name:p("ro","name"),slug:p("ro","slug")},en:{name:p("en","name"),slug:p("en","slug")}}}),y=u=>{var t;s.image=((t=u.target.files)==null?void 0:t[0])??null},v=()=>s.transform(u=>({...u,_method:"put"})).post(route("admin.categories.update",m.category.id),{forceFormData:!0});return(u,t)=>(o(),l("div",R,[t[18]||(t[18]=r("h1",{class:"text-xl font-semibold"},"Редактировать категорию",-1)),r("form",{onSubmit:h(v,["prevent"]),class:"space-y-8"},[r("div",S,[t[9]||(t[9]=r("h2",{class:"text-lg font-semibold"},"Изображение",-1)),m.category.image_url?(o(),l("div",E,[t[7]||(t[7]=r("p",{class:"text-sm text-gray-600 mb-2"},"Текущая картинка:",-1)),r("img",{src:m.category.image_url,class:"w-20 h-20 object-cover border rounded"},null,8,F)])):a("",!0),r("div",D,[t[8]||(t[8]=r("label",{class:"font-semibold"},"Заменить картинку",-1)),r("input",{type:"file",onChange:y},null,32),e(s).errors.image?(o(),l("div",O,i(e(s).errors.image),1)):a("",!0)])]),m.parents.length?(o(),l("div",B,[t[11]||(t[11]=r("h2",{class:"text-lg font-semibold"},"Родительская категория",-1)),d(r("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>e(s).parent_id=n),class:"form-input w-full"},[t[10]||(t[10]=r("option",{value:null},"— без родителя —",-1)),(o(!0),l(k,null,w(x.parents,n=>{var f;return o(),l("option",{key:n.id,value:n.id},i(((f=n.translation)==null?void 0:f.name)??`#${n.id}`),9,C)}),128))],512),[[b,e(s).parent_id]]),e(s).errors.parent_id?(o(),l("div",M,i(e(s).errors.parent_id),1)):a("",!0)])):a("",!0),r("div",j,[t[15]||(t[15]=r("h2",{class:"text-lg font-semibold"},"Переводы",-1)),r("div",T,[r("div",null,[t[12]||(t[12]=r("h3",{class:"font-semibold mb-2 uppercase"},"RU",-1)),d(r("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e(s).translations.ru.name=n),class:"form-input w-full",placeholder:"Название (RU)"},null,512),[[g,e(s).translations.ru.name]]),d(r("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e(s).translations.ru.slug=n),class:"form-input w-full mt-2",placeholder:"Slug (RU)"},null,512),[[g,e(s).translations.ru.slug]]),e(s).errors["translations.ru.name"]?(o(),l("div",q,i(e(s).errors["translations.ru.name"]),1)):a("",!0),e(s).errors["translations.ru.slug"]?(o(),l("div",A,i(e(s).errors["translations.ru.slug"]),1)):a("",!0)]),r("div",null,[t[13]||(t[13]=r("h3",{class:"font-semibold mb-2 uppercase"},"RO",-1)),d(r("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>e(s).translations.ro.name=n),class:"form-input w-full",placeholder:"Denumire (RO)"},null,512),[[g,e(s).translations.ro.name]]),d(r("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>e(s).translations.ro.slug=n),class:"form-input w-full mt-2",placeholder:"Slug (RO)"},null,512),[[g,e(s).translations.ro.slug]]),e(s).errors["translations.ro.name"]?(o(),l("div",L,i(e(s).errors["translations.ro.name"]),1)):a("",!0),e(s).errors["translations.ro.slug"]?(o(),l("div",$,i(e(s).errors["translations.ro.slug"]),1)):a("",!0)]),r("div",null,[t[14]||(t[14]=r("h3",{class:"font-semibold mb-2 uppercase"},"EN",-1)),d(r("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>e(s).translations.en.name=n),class:"form-input w-full",placeholder:"Name (EN)"},null,512),[[g,e(s).translations.en.name]]),d(r("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>e(s).translations.en.slug=n),class:"form-input w-full mt-2",placeholder:"Slug (EN)"},null,512),[[g,e(s).translations.en.slug]]),e(s).errors["translations.en.name"]?(o(),l("div",z,i(e(s).errors["translations.en.name"]),1)):a("",!0),e(s).errors["translations.en.slug"]?(o(),l("div",G,i(e(s).errors["translations.en.slug"]),1)):a("",!0)])])]),r("div",H,[t[17]||(t[17]=r("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"}," Обновить ",-1)),_(e(N),{href:u.route("admin.categories.index"),class:"px-4 py-2 border rounded hover:bg-gray-50 transition"},{default:V(()=>t[16]||(t[16]=[U(" Отмена ",-1)])),_:1,__:[16]},8,["href"])])],32)]))}};export{J as default};
