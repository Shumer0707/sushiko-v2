import{x as S,c as l,o as n,a as e,b as c,f as C,k as j,F as f,r as v,t as d,h,w as p,d as g,e as x,l as b,j as i}from"./app-BtZeyPR9.js";const A={class:"p-6 max-w-7xl mx-auto space-y-6"},V={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},B={class:"flex flex-col md:flex-row gap-3 md:items-center"},D={class:"flex items-center gap-2"},I=["value"],N={class:"flex gap-2"},$={class:"overflow-x-auto"},F={class:"w-full bg-white border border-gray-300 text-sm text-admin-text rounded-lg overflow-hidden"},M={class:"px-4 py-2 border"},O={class:"px-4 py-2 border"},T=["src"],U={class:"px-4 py-2 border"},E={class:"px-4 py-2 border"},K={class:"px-4 py-2 border"},L={class:"px-4 py-2 border whitespace-nowrap space-x-2"},P={class:"mt-4 flex justify-between items-center"},q=["disabled"],z=["disabled"],J={__name:"Index",props:{products:{type:Object,default:()=>({data:[],current_page:1,last_page:1,prev_page_url:null,next_page_url:null})},categories:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(s){var y;const u=S(((y=s.filters)==null?void 0:y.category_id)??""),_=()=>{const o=u.value||null;i.get(route("admin.products.index"),o?{category_id:o}:{},{preserveState:!0,preserveScroll:!0,replace:!0})},w=()=>{confirm("Вы точно хотите активировать все товары?")&&i.post(route("admin.products.activateAll"),{},{preserveState:!0,preserveScroll:!0})},k=()=>{confirm("Вы точно хотите деактивировать все товары?")&&i.post(route("admin.products.deactivateAll"),{},{preserveState:!0,preserveScroll:!0})},m=o=>{o&&i.get(o,{},{preserveState:!0,preserveScroll:!0})};return(o,t)=>(n(),l("div",A,[e("div",V,[t[6]||(t[6]=e("h1",{class:"text-xl font-semibold text-admin-text"},"Товары",-1)),e("div",B,[e("div",D,[t[4]||(t[4]=e("span",{class:"text-sm text-admin-text/80"},"Категория:",-1)),C(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),onChange:_,class:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm text-admin-text bg-white focus:outline-none focus:ring-2 focus:ring-admin-primary/60"},[t[3]||(t[3]=e("option",{value:""},"Все",-1)),(n(!0),l(f,null,v(s.categories,r=>{var a;return n(),l("option",{key:r.id,value:r.id},d(((a=r.translation)==null?void 0:a.name)||`Категория #${r.id}`),9,I)}),128))],544),[[j,u.value]])]),e("div",N,[e("button",{onClick:h(w,["prevent"]),class:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 transition"}," Активировать все "),e("button",{onClick:h(k,["prevent"]),class:"px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 transition"}," Деактивировать все ")]),c(x(b),{href:o.route("admin.products.create"),class:"bg-admin-primary text-white px-4 py-2 rounded-lg hover:bg-admin-muted transition text-sm"},{default:p(()=>t[5]||(t[5]=[g(" Добавить ",-1)])),_:1,__:[5]},8,["href"])])]),e("div",$,[e("table",F,[t[9]||(t[9]=e("thead",{class:"bg-admin-background text-left"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"ID"),e("th",{class:"px-4 py-2 border"},"Изображение"),e("th",{class:"px-4 py-2 border"},"Название"),e("th",{class:"px-4 py-2 border"},"SKU"),e("th",{class:"px-4 py-2 border"},"Цена"),e("th",{class:"px-4 py-2 border"},"Действия")])],-1)),e("tbody",null,[(n(!0),l(f,null,v(s.products.data,r=>{var a;return n(),l("tr",{key:r.id,class:"border-t hover:bg-gray-100"},[e("td",M,d(r.id),1),e("td",O,[e("img",{src:r.main_image_url,class:"w-12 h-12 object-cover border rounded"},null,8,T)]),e("td",U,d(((a=r.translation)==null?void 0:a.name)||"—"),1),e("td",E,d(r.sku),1),e("td",K,d(r.price)+" "+d(r.currency),1),e("td",L,[c(x(b),{href:o.route("admin.products.edit",r.id),class:"inline-block px-2.5 py-1.5 bg-admin-primary text-white rounded-lg hover:bg-admin-muted transition"},{default:p(()=>t[7]||(t[7]=[g(" Редактировать ",-1)])),_:2,__:[7]},1032,["href"]),c(x(b),{as:"button",method:"delete",href:o.route("admin.products.destroy",r.id),class:"inline-block px-2.5 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"},{default:p(()=>t[8]||(t[8]=[g(" Удалить ",-1)])),_:2,__:[8]},1032,["href"])])])}),128))])])]),e("div",P,[e("button",{disabled:!s.products.prev_page_url,onClick:t[1]||(t[1]=r=>m(s.products.prev_page_url)),class:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50"}," Назад ",8,q),e("span",null,"Страница "+d(s.products.current_page)+" из "+d(s.products.last_page),1),e("button",{disabled:!s.products.next_page_url,onClick:t[2]||(t[2]=r=>m(s.products.next_page_url)),class:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50"}," Вперёд ",8,z)])]))}};export{J as default};
