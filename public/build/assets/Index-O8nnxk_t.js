import{q as T,s as b,c as d,o as l,a as e,f as v,v as m,x as B,d as O,t as r,F as h,r as w,g as L,y as M,z as N,e as $,l as q,j as k}from"./app-BK6yevhJ.js";const z={class:"p-6 max-w-7xl mx-auto space-y-6"},H={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},E={class:"flex flex-wrap items-center gap-4 text-sm"},G={class:"flex flex-col"},J={class:"flex items-center gap-2"},P={class:"flex items-center gap-2"},Q={class:"flex flex-col"},R={key:0,class:"bg-white border border-gray-200 rounded-lg p-6 text-sm text-gray-500"},W={key:1,class:"overflow-x-auto"},X={class:"w-full bg-white border border-gray-300 text-sm text-admin-text rounded-lg overflow-hidden"},Y={class:"bg-admin-background text-left"},Z={class:"inline-flex items-center gap-1"},ee={class:"text-xs text-gray-500"},te={class:"inline-flex items-center gap-1"},se={class:"text-xs text-gray-500"},re=["onClick"],oe={class:"px-4 py-2 border"},le={class:"inline-flex items-center gap-1"},de={class:"text-xs text-gray-400"},ae={class:"px-4 py-2 border"},ne={class:"px-4 py-2 border"},ie={class:"px-4 py-2 border"},xe={class:"px-4 py-2 border"},pe={class:"px-4 py-2 border"},ce={class:"px-4 py-2 border font-semibold"},ue={class:"px-4 py-2 border"},ye={class:"px-4 py-2 border"},be={class:"inline-flex px-2 py-0.5 rounded-full text-xs border border-gray-300"},ge={class:"px-4 py-2 border text-center"},ve={key:0},me={colspan:10,class:"px-4 py-3 border-t bg-gray-50"},he={key:0,class:"space-y-2"},fe={class:"w-full text-xs border border-gray-200 bg-white rounded-lg overflow-hidden"},_e={class:"px-3 py-1 border text-center"},we={class:"px-3 py-1 border"},ke={class:"px-3 py-1 border text-right"},Ce={class:"px-3 py-1 border text-center"},Se={class:"px-3 py-1 border text-right"},Ve={key:1,class:"text-xs text-gray-500"},je={class:"mt-4 flex items-center justify-between text-xs text-gray-500"},De={class:"flex flex-wrap gap-1"},Ie={__name:"Index",props:{orders:Array,sort:Object,filters:Object},setup(a){var V,j,D,F;const n=a,f=T(()=>{var o;return((o=n.sort)==null?void 0:o.field)??"created_at"}),_=T(()=>{var o;return((o=n.sort)==null?void 0:o.direction)??"desc"}),x=b(((V=n.filters)==null?void 0:V.date_from)??""),p=b(((j=n.filters)==null?void 0:j.date_to)??""),c=b(((D=n.filters)==null?void 0:D.search)??""),u=b(((F=n.filters)==null?void 0:F.order_id)??""),g=b(null),U=o=>{g.value=g.value===o?null:o},y=()=>{k.get(route("admin.orders.index"),{sort:f.value,direction:_.value,date_from:x.value||"",date_to:p.value||"",search:c.value||"",order_id:u.value||""},{preserveState:!0,preserveScroll:!0,replace:!0})},C=o=>{let t="asc";f.value===o&&_.value==="asc"&&(t="desc"),k.get(route("admin.orders.index"),{sort:o,direction:t,date_from:x.value||"",date_to:p.value||"",search:c.value||"",order_id:u.value||""},{preserveState:!0,preserveScroll:!0,replace:!0})},S=o=>f.value!==o?"↕":_.value==="asc"?"↑":"↓",A=()=>{u.value="",c.value="",x.value="",p.value="",k.get(route("admin.orders.index"),{},{preserveState:!1,preserveScroll:!0,replace:!0})};return(o,t)=>(l(),d("div",z,[e("div",H,[t[10]||(t[10]=e("h1",{class:"text-xl font-semibold text-admin-text"},"Заказы",-1)),e("div",E,[e("div",G,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),type:"text",inputmode:"numeric",placeholder:"Например, 125",class:"border border-gray-300 rounded-lg px-3 py-1.5 bg-white text-admin-text text-sm w-32",onKeyup:B(y,["enter"]),onChange:y},null,544),[[m,u.value]]),t[6]||(t[6]=e("label",{class:"text-xs text-admin-text/80 mb-1"},"Ищет по ID заказа",-1))]),e("div",J,[t[7]||(t[7]=e("span",{class:"text-admin-text/80"},"От:",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),type:"date",class:"border border-gray-300 rounded-lg px-2 py-1 bg-white text-admin-text text-sm",onChange:y},null,544),[[m,x.value]])]),e("div",P,[t[8]||(t[8]=e("span",{class:"text-admin-text/80"},"До:",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),type:"date",class:"border border-gray-300 rounded-lg px-2 py-1 bg-white text-admin-text text-sm",onChange:y},null,544),[[m,p.value]])]),e("div",Q,[v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>c.value=s),type:"text",placeholder:"Поиск...",class:"border border-gray-300 rounded-lg px-3 py-1.5 bg-white text-admin-text text-sm w-56",onKeyup:B(y,["enter"])},null,544),[[m,c.value]]),t[9]||(t[9]=e("span",{class:"text-xs text-gray-400 mt-1"},"Ищет по имени клиента, телефону и сумме",-1))]),e("button",{onClick:A,class:"px-3 py-1.5 text-sm bg-gray-200 hover:bg-gray-300 rounded-lg transition"}," Сбросить всё ")])]),!a.orders.data||!a.orders.data.length?(l(),d("div",R," Пока нет заказов. ")):(l(),d("div",W,[e("table",X,[e("thead",Y,[e("tr",null,[e("th",{class:"px-4 py-2 border cursor-pointer select-none",onClick:t[4]||(t[4]=s=>C("id"))},[e("span",Z,[t[11]||(t[11]=O(" ID ",-1)),e("span",ee,r(S("id")),1)])]),e("th",{class:"px-4 py-2 border cursor-pointer select-none",onClick:t[5]||(t[5]=s=>C("created_at"))},[e("span",te,[t[12]||(t[12]=O(" Дата ",-1)),e("span",se,r(S("created_at")),1)])]),t[13]||(t[13]=e("th",{class:"px-4 py-2 border"},"Клиент",-1)),t[14]||(t[14]=e("th",{class:"px-4 py-2 border"},"Телефон",-1)),t[15]||(t[15]=e("th",{class:"px-4 py-2 border"},"Сумма",-1)),t[16]||(t[16]=e("th",{class:"px-4 py-2 border"},"Доставка",-1)),t[17]||(t[17]=e("th",{class:"px-4 py-2 border"},"Итого",-1)),t[18]||(t[18]=e("th",{class:"px-4 py-2 border"},"Валюта",-1)),t[19]||(t[19]=e("th",{class:"px-4 py-2 border"},"Статус",-1)),t[20]||(t[20]=e("th",{class:"px-4 py-2 border"},"Позиций",-1))])]),e("tbody",null,[(l(!0),d(h,null,w(a.orders.data,s=>{var I;return l(),d(h,{key:s.id},[e("tr",{class:"border-t hover:bg-gray-100 cursor-pointer",onClick:i=>U(s.id)},[e("td",oe,[e("span",le,[e("span",null,"#"+r(s.id),1),e("span",de,r(g.value===s.id?"▴":"▾"),1)])]),e("td",ae,r(s.created_at),1),e("td",ne,r(s.customer_name||"—"),1),e("td",ie,r(s.customer_phone||"—"),1),e("td",xe,r(s.total)+" "+r(s.currency),1),e("td",pe,r(s.delivery_cost??0)+" "+r(s.currency),1),e("td",ce,r(s.total_with_delivery)+" "+r(s.currency),1),e("td",ue,r(s.currency),1),e("td",ye,[e("span",be,r(s.status||"new"),1)]),e("td",ge,r(s.items_count??(((I=s.items)==null?void 0:I.length)||0)),1)],8,re),g.value===s.id?(l(),d("tr",ve,[e("td",me,[s.items&&s.items.length?(l(),d("div",he,[t[22]||(t[22]=e("div",{class:"text-xs text-gray-500 mb-1"},"Товары в заказе:",-1)),e("table",fe,[t[21]||(t[21]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-3 py-1 border"},"#"),e("th",{class:"px-3 py-1 border text-left"},"Название"),e("th",{class:"px-3 py-1 border text-right"},"Цена"),e("th",{class:"px-3 py-1 border text-center"},"Кол-во"),e("th",{class:"px-3 py-1 border text-right"},"Сумма")])],-1)),e("tbody",null,[(l(!0),d(h,null,w(s.items,(i,K)=>(l(),d("tr",{key:i.id,class:"hover:bg-gray-50"},[e("td",_e,r(K+1),1),e("td",we,r(i.name),1),e("td",ke,r(i.price)+" "+r(s.currency),1),e("td",Ce,r(i.quantity),1),e("td",Se,r(i.total)+" "+r(s.currency),1)]))),128))])])])):(l(),d("div",Ve,"В этом заказе нет позиций."))])])):L("",!0)],64)}),128))])]),e("div",je,[e("div",null," Показано "+r(a.orders.data.length)+" из "+r(a.orders.total)+" заказов (страница "+r(a.orders.current_page)+" из "+r(a.orders.last_page)+") ",1),e("div",De,[(l(!0),d(h,null,w(a.orders.links,s=>(l(),M($(q),{key:s.label,href:s.url||"#",class:N(["px-2 py-1 rounded border text-xs",s.active?"bg-gray-900 text-white border-gray-900":s.url?"bg-white text-gray-700 hover:bg-gray-100 border-gray-300":"bg-gray-100 text-gray-400 border-gray-200 cursor-default"]),innerHTML:s.label,"preserve-scroll":!0},null,8,["href","class","innerHTML"]))),128))])])]))]))}};export{Ie as default};
