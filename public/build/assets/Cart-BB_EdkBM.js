import{n as I,c,o as u,a as e,b as q,t,e as s,w as S,d as $,l as F,A as P,_ as W,F as U,r as E,g,D as V,E as O,i as A,x as j,z as y,h as B,f,v as M,s as N,G,j as z,y as Q}from"./app-Cxbt74IC.js";import{P as H,a as J}from"./PageGradient-CNN4Zyn6.js";const K={class:"text-center py-12 sm:py-16 px-4"},X={class:"text-xl sm:text-2xl font-bold text-sushi-silver mb-4"},Y={class:"text-sushi-silver/60 mb-6 text-sm sm:text-base"},Z={__name:"CartEmpty",props:{locale:{type:String,required:!0}},setup(a){const m=I().props.translations.common;return(h,_)=>(u(),c("div",K,[_[0]||(_[0]=e("div",{class:"text-5xl sm:text-6xl mb-4"},"🛒",-1)),e("h2",X,t(s(m).cart_empty_title),1),e("p",Y,t(s(m).cart_empty_description),1),q(s(F),{href:h.route("home",{locale:a.locale}),class:"inline-block bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark px-6 py-3 rounded-lg font-medium transition-colors"},{default:S(()=>[$(t(s(m).cart_empty_button),1)]),_:1},8,["href"])]))}},ee={class:"bg-sushi-dark/50 border border-sushi-first rounded-lg p-4 hover:border-sushi-gold/50 transition-colors"},te={class:"flex flex-col lg:flex-row lg:items-center gap-4"},se={class:"flex items-center gap-4 flex-grow"},oe={class:"w-20 h-20 sm:w-24 sm:h-24 bg-sushi-first rounded-lg overflow-hidden"},re=["src","alt"],le={key:1,class:"w-full h-full flex items-center justify-center text-2xl sm:text-3xl"},ie={class:"flex-grow min-w-0"},ae={class:"text-sm text-sushi-silver/60 mt-1"},ne={class:"flex items-center justify-between lg:justify-end gap-3 lg:gap-4"},de={class:"flex items-center gap-1 sm:gap-2 bg-sushi-first rounded-lg overflow-hidden"},ue={class:"px-3 sm:px-4 py-2 text-sushi-silver font-medium min-w-[2.5ch] text-center"},ce={class:"text-right min-w-[80px] sm:min-w-[100px]"},me={class:"font-bold text-sushi-gold text-sm sm:text-base"},he=["title"],pe={__name:"CartItem",props:{item:{type:Object,required:!0},locale:{type:String,required:!0}},emits:["increment","decrement","remove"],setup(a){const m=I().props.translations.common,h=a,_=P(()=>(h.item.product.price*h.item.quantity).toFixed(2));return(r,b)=>(u(),c("div",ee,[e("div",te,[e("div",se,[q(s(F),{href:r.route("product.show",{locale:a.locale,slug:a.item.product.slug}),class:"flex-shrink-0"},{default:S(()=>[e("div",oe,[a.item.product.image_url?(u(),c("img",{key:0,src:a.item.product.image_url,alt:a.item.product.name,class:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"},null,8,re)):(u(),c("div",le,"🍣"))])]),_:1},8,["href"]),e("div",ie,[q(s(F),{href:r.route("product.show",{locale:a.locale,slug:a.item.product.slug}),class:"font-semibold text-sushi-silver hover:text-sushi-gold transition-colors block truncate"},{default:S(()=>[$(t(a.item.product.name),1)]),_:1},8,["href"]),e("p",ae,t(a.item.product.price)+" "+t(a.item.product.currency),1)])]),e("div",ne,[e("div",de,[e("button",{onClick:b[0]||(b[0]=p=>r.$emit("decrement")),class:"px-2 sm:px-3 py-2 bg-sushi-dark hover:bg-sushi-red/40 text-sushi-gold font-bold transition-colors text-lg"}," − "),e("span",ue,t(a.item.quantity),1),e("button",{onClick:b[1]||(b[1]=p=>r.$emit("increment")),class:"px-2 sm:px-3 py-2 bg-sushi-dark hover:bg-sushi-red/40 text-sushi-gold font-bold transition-colors text-lg"}," + ")]),e("div",ce,[e("p",me,t(_.value)+" "+t(a.item.product.currency),1)]),e("button",{onClick:b[2]||(b[2]=p=>r.$emit("remove")),class:"text-red-400 hover:text-red-300 p-2 transition-colors flex-shrink-0",title:s(m).cart_item_remove},b[3]||(b[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,he)])])]))}},ve={class:"lg:col-span-1"},xe={class:"bg-sushi-dark/50 border border-sushi-first rounded-lg p-4 sm:p-6 lg:sticky lg:top-24"},be={class:"text-xl font-bold text-sushi-silver mb-4"},_e={class:"space-y-2 mb-4 max-h-[200px] overflow-y-auto custom-scrollbar"},ye={class:"flex-grow min-w-0 pr-2"},ge={class:"truncate block"},fe={class:"text-xs text-sushi-silver/60"},ke={class:"font-medium text-sushi-gold flex-shrink-0"},we={class:"space-y-3 mb-6"},$e={class:"flex justify-between text-sushi-silver/80 text-sm sm:text-base"},Ce={class:"flex justify-between text-sushi-silver/80 text-sm sm:text-base"},qe={key:0,class:"text-sushi-gold font-medium"},Me={key:1,class:"text-sushi-silver"},Ve={key:0,class:"text-xs text-sushi-gold/80 bg-sushi-first/20 rounded p-2"},Ne={class:"border-t border-sushi-first pt-3"},De={class:"flex justify-between items-center"},Te={class:"text-base sm:text-lg font-semibold text-sushi-silver"},Se={class:"text-xl sm:text-2xl font-bold text-sushi-gold"},Ie={__name:"CartSummary",props:{items:{type:Array,required:!0},totalItems:{type:Number,required:!0},totalPrice:{type:[Number,String],required:!0},currency:{type:String,required:!0},locale:{type:String,required:!0},deliveryCost:{type:Number,required:!0},isFreeDelivery:{type:Boolean,required:!0},amountUntilFree:{type:[Number,String],required:!0},totalWithDelivery:{type:[Number,String],required:!0}},emits:["checkout","clear"],setup(a){const m=I().props.translations.common;return(h,_)=>(u(),c("div",ve,[e("div",xe,[e("h3",be,t(s(m).cart_summary_title),1),e("div",_e,[(u(!0),c(U,null,E(a.items,r=>(u(),c("div",{key:r.product.id,class:"flex justify-between items-center text-sm text-sushi-silver/80 py-2 border-b border-sushi-first/30"},[e("div",ye,[e("span",ge,t(r.product.name),1),e("span",fe,t(r.quantity)+" × "+t(r.product.price)+" "+t(a.currency),1)]),e("span",ke,t((r.product.price*r.quantity).toFixed(2))+" "+t(a.currency),1)]))),128))]),_[2]||(_[2]=e("div",{class:"border-t border-sushi-first my-4"},null,-1)),e("div",we,[e("div",$e,[e("span",null,t(s(m).cart_summary_products)+" ("+t(a.totalItems)+")",1),e("span",null,t(a.totalPrice)+" "+t(a.currency),1)]),e("div",Ce,[e("span",null,t(s(m).cart_summary_delivery),1),a.isFreeDelivery?(u(),c("span",qe,t(s(m).cart_summary_free_delivery),1)):(u(),c("span",Me,t(a.deliveryCost)+" "+t(a.currency),1))]),!a.isFreeDelivery&&a.amountUntilFree>0?(u(),c("div",Ve," 💡 "+t(s(m).cart_summary_until_free)+" "+t(a.amountUntilFree)+" "+t(a.currency)+" "+t(s(m).cart_summary_until_free_text),1)):g("",!0),e("div",Ne,[e("div",De,[e("span",Te,t(s(m).cart_summary_total),1),e("span",Se,t(a.totalWithDelivery)+" "+t(a.currency),1)])])]),e("button",{onClick:_[0]||(_[0]=r=>h.$emit("checkout")),class:"block w-full bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark py-3 rounded-lg font-medium text-center transition-colors mb-3"},t(s(m).cart_summary_checkout),1),q(s(F),{href:h.route("home",{locale:a.locale}),class:"block w-full bg-sushi-first hover:bg-sushi-first/80 text-sushi-silver border border-sushi-dark py-3 rounded-lg font-medium text-center transition-colors"},{default:S(()=>[$(t(s(m).cart_summary_continue),1)]),_:1},8,["href"]),e("button",{onClick:_[1]||(_[1]=r=>h.$emit("clear")),class:"w-full mt-4 text-red-400 hover:text-red-300 text-sm underline transition-colors"},t(s(m).cart_summary_clear),1)])]))}},Fe=W(Ie,[["__scopeId","data-v-27df23f9"]]),D={1:1,7:1,20:2,27:2,30:2,31:2,32:2,33:2,34:2,36:2,39:2,40:2,41:2,43:2,44:2,45:2,46:2,47:2,48:2,49:2,51:2,52:2,53:2,54:2,55:2,56:2,57:2,58:2,60:2,61:2,62:2,63:2,64:2,65:2,66:2,81:2,82:2,84:2,86:2,90:2,91:2,92:2,93:2,94:2,95:2,98:2,212:3,213:3,216:3,218:3,220:3,221:3,222:3,223:3,224:3,225:3,226:3,227:3,228:3,229:3,230:3,231:3,232:3,233:3,234:3,235:3,236:3,237:3,238:3,239:3,240:3,241:3,242:3,243:3,244:3,245:3,246:3,248:3,249:3,250:3,251:3,252:3,253:3,254:3,255:3,256:3,257:3,258:3,260:3,261:3,262:3,263:3,264:3,265:3,266:3,267:3,268:3,269:3,290:3,291:3,297:3,298:3,299:3,350:3,351:3,352:3,353:3,354:3,355:3,356:3,357:3,358:3,359:3,370:3,371:3,372:3,373:3,374:3,375:3,376:3,377:3,378:3,380:3,381:3,382:3,383:3,385:3,386:3,387:3,389:3,420:3,421:3,423:3,500:3,501:3,502:3,503:3,504:3,505:3,506:3,507:3,508:3,509:3,590:3,591:3,592:3,593:3,594:3,595:3,596:3,597:3,598:3,599:3,670:3,672:3,673:3,674:3,675:3,676:3,677:3,678:3,679:3,680:3,681:3,682:3,683:3,685:3,686:3,687:3,688:3,689:3,690:3,691:3,692:3,850:3,852:3,853:3,855:3,856:3,880:3,886:3,960:3,961:3,962:3,963:3,964:3,965:3,966:3,967:3,968:3,970:3,971:3,972:3,973:3,974:3,975:3,976:3,977:3,992:3,993:3,994:3,995:3,996:3,998:3};function Ue(a=""){const k=V(a),m=p=>{if(p.length===0)return 0;if(D[p[0]])return D[p[0]];if(p.length>=2){const v=p.slice(0,2);if(D[v])return D[v]}if(p.length>=3){const v=p.slice(0,3);if(D[v])return D[v]}return 3},h=p=>{const v=p.replace(/\D/g,"");if(v.length===0)return"";const x=m(v);let o="+";if(v.length<=x)o+=v;else{o+=v.slice(0,x)+" ";const n=v.slice(x);n.length<=2?o+=n:n.length<=5?o+=n.slice(0,2)+" "+n.slice(2):n.length<=8?o+=n.slice(0,2)+" "+n.slice(2,5)+" "+n.slice(5):o+=n.slice(0,2)+" "+n.slice(2,5)+" "+n.slice(5,8)+" "+n.slice(8,11)}return o};return{formattedValue:k,handleInput:p=>{const v=p.target.selectionStart,x=k.value,o=p.target.value,n=h(o);k.value=n,setTimeout(()=>{if(p.target){let w=v;n.length-x.length>1?w=v+(n.length-x.length):n.length<x.length&&v>0&&x[v]===" "&&(w=v-1),w=Math.min(Math.max(0,w),n.length),p.target.setSelectionRange(w,w)}},0)},getCleanValue:()=>{const p=k.value.replace(/\D/g,"");return p?"+"+p:""},isValid:()=>k.value.replace(/\D/g,"").length>=10}}const je={class:"flex items-center justify-between p-4 sm:p-6 border-b border-sushi-first"},Pe={class:"text-lg sm:text-2xl font-bold text-sushi-silver"},Be={class:"p-4 sm:p-6"},We={class:"bg-sushi-first/30 border border-sushi-gold/30 rounded-lg p-3 sm:p-4 mb-6"},Ee={class:"flex justify-between items-center flex-wrap gap-2"},Oe={class:"text-sushi-silver/80 text-sm sm:text-base"},ze={class:"text-xl sm:text-2xl font-bold text-sushi-gold"},Le={class:"text-xs sm:text-sm text-sushi-silver/60 mt-2"},Re={key:0,class:"bg-red-500/10 border border-red-400 rounded-lg p-4 mb-6"},Ae={class:"text-red-400 font-medium"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qe={class:"block text-sm font-medium text-sushi-silver mb-2"},He={class:"text-red-400"},Je=["placeholder"],Ke={key:0,class:"text-red-400 text-xs mt-1"},Xe={class:"block text-sm font-medium text-sushi-silver mb-2"},Ye={class:"text-red-400"},Ze=["value","placeholder"],et={key:0,class:"text-red-400 text-xs mt-1"},tt={class:"block text-sm font-medium text-sushi-silver mb-2"},st=["placeholder"],ot={key:0,class:"text-red-400 text-xs mt-1"},rt={class:"block text-sm font-medium text-sushi-silver mb-3"},lt={class:"text-red-400"},it={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},at={class:"text-sushi-silver text-sm sm:text-base"},nt={class:"text-sushi-silver text-sm sm:text-base"},dt={key:0,class:"text-red-400 text-xs mt-1"},ut={key:0,class:"bg-sushi-first/30 border border-sushi-gold/30 rounded-lg p-4"},ct={class:"text-sushi-silver font-medium mb-2"},mt={class:"text-sushi-silver/80 text-sm mb-1"},ht={class:"text-sushi-silver/60 text-xs"},pt={key:1,class:"space-y-4 bg-sushi-first/10 border border-sushi-first rounded-lg p-4"},vt={class:"block text-sm font-medium text-sushi-silver mb-3"},xt={class:"text-red-400"},bt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},_t={class:"text-sushi-silver text-sm sm:text-base"},yt={class:"text-sushi-silver text-sm sm:text-base"},gt={key:0,class:"text-red-400 text-xs mt-1"},ft={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},kt={class:"sm:col-span-2"},wt={class:"block text-sm font-medium text-sushi-silver mb-2"},$t={class:"text-red-400"},Ct=["required","placeholder"],qt={key:0,class:"text-red-400 text-xs mt-1"},Mt={class:"block text-sm font-medium text-sushi-silver mb-2"},Vt={class:"text-red-400"},Nt=["required","placeholder"],Dt={key:0,class:"text-red-400 text-xs mt-1"},Tt={key:0,class:"space-y-4"},St={class:"block text-sm font-medium text-sushi-silver mb-2"},It={class:"text-red-400"},Ft=["required","placeholder"],Ut={key:0,class:"text-red-400 text-xs mt-1"},jt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Pt={class:"block text-sm font-medium text-sushi-silver mb-2"},Bt={class:"text-red-400"},Wt=["required","placeholder"],Et={key:0,class:"text-red-400 text-xs mt-1"},Ot={key:1,class:"text-xs text-sushi-silver/50 mt-1"},zt={class:"block text-sm font-medium text-sushi-silver mb-2"},Lt={class:"text-red-400"},Rt=["required","placeholder"],At={key:0,class:"text-red-400 text-xs mt-1"},Gt={key:1,class:"text-xs text-sushi-silver/50 mt-1"},Qt={class:"block text-sm font-medium text-sushi-silver mb-3"},Ht={class:"text-red-400"},Jt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Kt={class:"text-sushi-silver text-sm sm:text-base"},Xt={class:"text-sushi-silver text-sm sm:text-base"},Yt={key:0,class:"text-red-400 text-xs mt-1"},Zt={class:"block text-sm font-medium text-sushi-silver mb-2"},es=["placeholder"],ts={key:0,class:"text-red-400 text-xs mt-1"},ss={class:"flex flex-col sm:flex-row gap-3 pt-4"},os=["disabled"],rs={__name:"CheckoutModal",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(a,{emit:k}){const m=a,h=k,r=I().props.translations.common,b=O(),p=Ue(),v=V(""),x=V({}),o=V({name:"",email:"",deliveryMethod:"pickup",addressType:"apartment",address:"",houseNumber:"",apartmentNumber:"",entrance:"",floor:"",comment:"",payment:"cash"}),n=V(!1),w=V(!1);A(()=>m.isOpen,C=>{C?(document.body.style.overflow="hidden",w.value=!1):document.body.style.overflow=""});const L=P(()=>{const C=b.totalItems,l=C%10,i=C%100;return i>=11&&i<=19?r.item_5:l===1?r.item_1:l>=2&&l<=4?r.item_2:r.item_5}),T=()=>{w.value=!0,setTimeout(()=>{h("close")},250)},d=C=>x.value[C]?x.value[C][0]:null,R=async()=>{if(x.value={},!p.isValid()){v.value=r.checkout_phone_error;return}v.value="",n.value=!0;const C=b.items.map(i=>({id:i.product.id,name:i.product.name,price:parseFloat(i.product.price),quantity:i.quantity})),l={customer:{name:o.value.name,phone:p.getCleanValue(),email:o.value.email},delivery:{method:o.value.deliveryMethod,...o.value.deliveryMethod==="delivery"&&{addressType:o.value.addressType,address:o.value.address,houseNumber:o.value.houseNumber,...o.value.addressType==="apartment"&&{apartmentNumber:o.value.apartmentNumber,entrance:o.value.entrance,floor:o.value.floor}}},payment:o.value.payment,comment:o.value.comment,items:C,total:parseFloat(b.totalPrice),deliveryCost:parseFloat(b.deliveryCost),totalWithDelivery:parseFloat(b.totalWithDelivery),currency:b.currency};z.post(route("order.checkout"),l,{preserveScroll:!0,onSuccess:()=>{x.value={},b.clearCart(),o.value={name:"",email:"",deliveryMethod:"pickup",addressType:"apartment",address:"",houseNumber:"",apartmentNumber:"",entrance:"",floor:"",comment:"",payment:"cash"},p.formattedValue.value="",v.value="",T(),alert(r.checkout_success)},onError:i=>{x.value=i,console.error("Ошибки валидации:",i)},onFinish:()=>{n.value=!1}})};return(C,l)=>(u(),j(G,{"is-visible":a.isOpen,"z-index":9999,onClose:T},{default:S(()=>[a.isOpen?(u(),c("div",{key:0,class:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",onClick:T},[e("div",{onClick:l[15]||(l[15]=B(()=>{},["stop"])),class:y(["bg-sushi-dark border border-sushi-gold rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto modal-content",w.value?"closing":""])},[e("div",je,[e("h2",Pe,t(s(r).checkout_title),1),e("button",{onClick:T,class:"text-sushi-silver/60 hover:text-sushi-gold transition-colors p-1"},l[16]||(l[16]=[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Be,[e("div",We,[e("div",Ee,[e("span",Oe,t(s(r).checkout_total_label),1),e("span",ze,t(s(b).totalWithDelivery)+" "+t(s(b).currency),1)]),e("p",Le,t(s(b).totalItems)+" "+t(L.value),1)]),d("items")?(u(),c("div",Re,[e("p",Ae,t(d("items")),1)])):g("",!0),e("form",{onSubmit:B(R,["prevent"]),class:"space-y-4"},[e("div",Ge,[e("div",null,[e("label",Qe,[$(t(s(r).checkout_name_label)+" ",1),e("span",He,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>o.value.name=i),type:"text",required:"",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("customer.name")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_name_placeholder},null,10,Je),[[M,o.value.name]]),d("customer.name")?(u(),c("p",Ke,t(d("customer.name")),1)):g("",!0)]),e("div",null,[e("label",Xe,[$(t(s(r).checkout_phone_label)+" ",1),e("span",Ye,t(s(r).checkout_required),1)]),e("input",{value:s(p).formattedValue.value,onInput:l[1]||(l[1]=(...i)=>s(p).handleInput&&s(p).handleInput(...i)),type:"text",required:"",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",v.value||d("customer.phone")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_phone_placeholder},null,42,Ze),v.value||d("customer.phone")?(u(),c("p",et,t(v.value||d("customer.phone")),1)):g("",!0)])]),e("div",null,[e("label",tt,t(s(r).checkout_email_label),1),f(e("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>o.value.email=i),type:"email",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("customer.email")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_email_placeholder},null,10,st),[[M,o.value.email]]),d("customer.email")?(u(),c("p",ot,t(d("customer.email")),1)):g("",!0)]),e("div",null,[e("label",rt,[$(t(s(r).checkout_delivery_method_label)+" ",1),e("span",lt,t(s(r).checkout_required),1)]),e("div",it,[e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.deliveryMethod==="pickup"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[3]||(l[3]=i=>o.value.deliveryMethod=i),type:"radio",value:"pickup",class:"mr-3 flex-shrink-0",required:""},null,512),[[N,o.value.deliveryMethod]]),e("span",at,t(s(r).checkout_pickup),1)],2),e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.deliveryMethod==="delivery"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[4]||(l[4]=i=>o.value.deliveryMethod=i),type:"radio",value:"delivery",class:"mr-3 flex-shrink-0",required:""},null,512),[[N,o.value.deliveryMethod]]),e("span",nt,t(s(r).checkout_delivery),1)],2)]),d("delivery.method")?(u(),c("p",dt,t(d("delivery.method")),1)):g("",!0)]),o.value.deliveryMethod==="pickup"?(u(),c("div",ut,[e("p",ct,t(s(r).checkout_pickup_address_label),1),e("p",mt,t(s(r).checkout_pickup_address),1),e("p",ht,t(s(r).checkout_pickup_hours),1)])):g("",!0),o.value.deliveryMethod==="delivery"?(u(),c("div",pt,[e("div",null,[e("label",vt,[$(t(s(r).checkout_address_type_label)+" ",1),e("span",xt,t(s(r).checkout_required),1)]),e("div",bt,[e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.addressType==="house"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[5]||(l[5]=i=>o.value.addressType=i),type:"radio",value:"house",class:"mr-3 flex-shrink-0"},null,512),[[N,o.value.addressType]]),e("span",_t,t(s(r).checkout_house),1)],2),e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.addressType==="apartment"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[6]||(l[6]=i=>o.value.addressType=i),type:"radio",value:"apartment",class:"mr-3 flex-shrink-0"},null,512),[[N,o.value.addressType]]),e("span",yt,t(s(r).checkout_apartment),1)],2)]),d("delivery.addressType")?(u(),c("p",gt,t(d("delivery.addressType")),1)):g("",!0)]),e("div",ft,[e("div",kt,[e("label",wt,[$(t(s(r).checkout_street_label)+" ",1),e("span",$t,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[7]||(l[7]=i=>o.value.address=i),type:"text",required:o.value.deliveryMethod==="delivery",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("delivery.address")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_street_placeholder},null,10,Ct),[[M,o.value.address]]),d("delivery.address")?(u(),c("p",qt,t(d("delivery.address")),1)):g("",!0)]),e("div",null,[e("label",Mt,[$(t(s(r).checkout_house_number_label)+" ",1),e("span",Vt,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[8]||(l[8]=i=>o.value.houseNumber=i),type:"text",required:o.value.deliveryMethod==="delivery",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("delivery.houseNumber")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_house_number_placeholder},null,10,Nt),[[M,o.value.houseNumber]]),d("delivery.houseNumber")?(u(),c("p",Dt,t(d("delivery.houseNumber")),1)):g("",!0)])]),o.value.addressType==="apartment"?(u(),c("div",Tt,[e("div",null,[e("label",St,[$(t(s(r).checkout_apartment_number_label)+" ",1),e("span",It,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[9]||(l[9]=i=>o.value.apartmentNumber=i),type:"text",required:o.value.deliveryMethod==="delivery"&&o.value.addressType==="apartment",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("delivery.apartmentNumber")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_apartment_number_placeholder},null,10,Ft),[[M,o.value.apartmentNumber]]),d("delivery.apartmentNumber")?(u(),c("p",Ut,t(d("delivery.apartmentNumber")),1)):g("",!0)]),e("div",jt,[e("div",null,[e("label",Pt,[$(t(s(r).checkout_entrance_label)+" ",1),e("span",Bt,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[10]||(l[10]=i=>o.value.entrance=i),type:"text",required:o.value.deliveryMethod==="delivery"&&o.value.addressType==="apartment",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("delivery.entrance")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_entrance_placeholder},null,10,Wt),[[M,o.value.entrance]]),d("delivery.entrance")?(u(),c("p",Et,t(d("delivery.entrance")),1)):(u(),c("p",Ot,t(s(r).checkout_entrance_hint),1))]),e("div",null,[e("label",zt,[$(t(s(r).checkout_floor_label)+" ",1),e("span",Lt,t(s(r).checkout_required),1)]),f(e("input",{"onUpdate:modelValue":l[11]||(l[11]=i=>o.value.floor=i),type:"text",required:o.value.deliveryMethod==="delivery"&&o.value.addressType==="apartment",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",d("delivery.floor")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_floor_placeholder},null,10,Rt),[[M,o.value.floor]]),d("delivery.floor")?(u(),c("p",At,t(d("delivery.floor")),1)):(u(),c("p",Gt,t(s(r).checkout_floor_hint),1))])])])):g("",!0)])):g("",!0),e("div",null,[e("label",Qt,[$(t(s(r).checkout_payment_label)+" ",1),e("span",Ht,t(s(r).checkout_required),1)]),e("div",Jt,[e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.payment==="cash"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[12]||(l[12]=i=>o.value.payment=i),type:"radio",value:"cash",class:"mr-3 flex-shrink-0",required:""},null,512),[[N,o.value.payment]]),e("span",Kt,t(s(r).checkout_cash),1)],2),e("label",{class:y(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",o.value.payment==="card"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[f(e("input",{"onUpdate:modelValue":l[13]||(l[13]=i=>o.value.payment=i),type:"radio",value:"card",class:"mr-3 flex-shrink-0",required:""},null,512),[[N,o.value.payment]]),e("span",Xt,t(s(r).checkout_card),1)],2)]),d("payment")?(u(),c("p",Yt,t(d("payment")),1)):g("",!0)]),e("div",null,[e("label",Zt,t(s(r).checkout_comment_label),1),f(e("textarea",{"onUpdate:modelValue":l[14]||(l[14]=i=>o.value.comment=i),rows:"3",class:y(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors resize-none",d("comment")?"border-red-400":"border-sushi-dark"]),placeholder:s(r).checkout_comment_placeholder},null,10,es),[[M,o.value.comment]]),d("comment")?(u(),c("p",ts,t(d("comment")),1)):g("",!0)]),e("div",ss,[e("button",{type:"submit",disabled:n.value,class:"w-full sm:flex-1 bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"},t(n.value?s(r).checkout_submitting:s(r).checkout_submit),9,os),e("button",{type:"button",onClick:T,class:"w-full sm:flex-1 bg-sushi-first hover:bg-sushi-first/80 text-sushi-silver border border-sushi-dark py-3 rounded-lg font-medium transition-colors text-sm sm:text-base"},t(s(r).checkout_cancel),1)])],32)])],2)])):g("",!0)]),_:1},8,["is-visible"]))}},ls=W(rs,[["__scopeId","data-v-90470882"]]),is={class:"relative z-20 min-h-screen"},as={class:"container mx-auto px-4 py-8 max-w-6xl"},ns={class:"mb-8"},ds={class:"text-3xl font-bold text-sushi-silver mb-2"},us={class:"text-sushi-silver/60"},cs={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ms={class:"lg:col-span-2 space-y-4"},vs={__name:"Cart",setup(a){const k=I(),m=k.props.translations.common,h=O(),_=V(!1),r=P(()=>{const x=h.totalItems,o=x%10,n=x%100;return n>=11&&n<=19?m.item_5:o===1?m.item_1:o>=2&&o<=4?m.item_2:m.item_5}),b=x=>{confirm(m.cart_item_confirm_remove)&&h.removeFromCart(x)},p=()=>{confirm(m.cart_confirm_clear)&&h.clearCart()},v=x=>{console.log("Заказ отправлен:",x),alert(`${m.cart_order_success}, ${x.customer.name}! ${m.cart_order_contact} ${x.customer.phone}`),_.value=!1,h.clearCart(),setTimeout(()=>{z.visit(route("home",{locale:k.props.locale}))},1e3)};return(x,o)=>(u(),c(U,null,[q(s(Q),{title:s(m).cart_page_title},null,8,["title"]),q(H,{image:"/images/sushi-pattern.jpg",opacity:.4,speed:.2,"max-height":"100vh"}),q(J),e("div",is,[e("div",as,[e("div",ns,[e("h1",ds,t(s(m).cart_page_title),1),e("p",us,t(s(h).totalItems)+" "+t(r.value),1)]),s(h).items.length===0?(u(),j(Z,{key:0,locale:x.$page.props.locale},null,8,["locale"])):(u(),c("div",cs,[e("div",ms,[(u(!0),c(U,null,E(s(h).items,n=>(u(),j(pe,{key:n.product.id,item:n,locale:x.$page.props.locale,onIncrement:w=>s(h).incrementQuantity(n.product.id),onDecrement:w=>s(h).decrementQuantity(n.product.id),onRemove:w=>b(n.product.id)},null,8,["item","locale","onIncrement","onDecrement","onRemove"]))),128))]),q(Fe,{items:s(h).items,"total-items":s(h).totalItems,"total-price":s(h).totalPrice,currency:s(h).currency,locale:x.$page.props.locale,"delivery-cost":s(h).deliveryCost,"is-free-delivery":s(h).isFreeDelivery,"amount-until-free":s(h).amountUntilFreeDelivery,"total-with-delivery":s(h).totalWithDelivery,onCheckout:o[0]||(o[0]=n=>_.value=!0),onClear:p},null,8,["items","total-items","total-price","currency","locale","delivery-cost","is-free-delivery","amount-until-free","total-with-delivery"])]))])]),q(ls,{"is-open":_.value,onClose:o[1]||(o[1]=n=>_.value=!1),onSubmit:v},null,8,["is-open"])],64))}};export{vs as default};
