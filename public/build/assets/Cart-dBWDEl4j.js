import{c as u,o as n,a as e,b as M,w as _,d as k,e as x,l as S,A as U,t as r,_ as P,F as I,r as B,g,D as N,E,i as z,x as F,z as f,h as j,f as y,v as V,s as D,G as L,j as W,n as R,y as A}from"./app-DfjuuZkt.js";import{P as G,a as Q}from"./PageGradient-svt5TM05.js";const H={class:"text-center py-12 sm:py-16 px-4"},J={__name:"CartEmpty",props:{locale:{type:String,required:!0}},setup(o){return(d,a)=>(n(),u("div",H,[a[1]||(a[1]=e("div",{class:"text-5xl sm:text-6xl mb-4"},"🛒",-1)),a[2]||(a[2]=e("h2",{class:"text-xl sm:text-2xl font-bold text-sushi-silver mb-4"},"Корзина пуста",-1)),a[3]||(a[3]=e("p",{class:"text-sushi-silver/60 mb-6 text-sm sm:text-base"},"Добавьте товары из каталога",-1)),M(x(S),{href:d.route("home",{locale:o.locale}),class:"inline-block bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark px-6 py-3 rounded-lg font-medium transition-colors"},{default:_(()=>a[0]||(a[0]=[k(" Перейти в каталог ",-1)])),_:1,__:[0]},8,["href"])]))}},K={class:"bg-sushi-dark/50 border border-sushi-first rounded-lg p-4 hover:border-sushi-gold/50 transition-colors"},X={class:"flex flex-col lg:flex-row lg:items-center gap-4"},Y={class:"flex items-center gap-4 flex-grow"},Z={class:"w-20 h-20 sm:w-24 sm:h-24 bg-sushi-first rounded-lg overflow-hidden"},ee=["src","alt"],se={key:1,class:"w-full h-full flex items-center justify-center text-2xl sm:text-3xl"},te={class:"flex-grow min-w-0"},re={class:"text-sm text-sushi-silver/60 mt-1"},le={class:"flex items-center justify-between lg:justify-end gap-3 lg:gap-4"},oe={class:"flex items-center gap-1 sm:gap-2 bg-sushi-first rounded-lg overflow-hidden"},ie={class:"px-3 sm:px-4 py-2 text-sushi-silver font-medium min-w-[2.5ch] text-center"},ne={class:"text-right min-w-[80px] sm:min-w-[100px]"},de={class:"font-bold text-sushi-gold text-sm sm:text-base"},ue={__name:"CartItem",props:{item:{type:Object,required:!0},locale:{type:String,required:!0}},emits:["increment","decrement","remove"],setup(o){const d=o,a=U(()=>(d.item.product.price*d.item.quantity).toFixed(2));return(h,b)=>(n(),u("div",K,[e("div",X,[e("div",Y,[M(x(S),{href:h.route("product.show",{locale:o.locale,slug:o.item.product.slug}),class:"flex-shrink-0"},{default:_(()=>[e("div",Z,[o.item.product.image_url?(n(),u("img",{key:0,src:o.item.product.image_url,alt:o.item.product.name,class:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"},null,8,ee)):(n(),u("div",se,"🍣"))])]),_:1},8,["href"]),e("div",te,[M(x(S),{href:h.route("product.show",{locale:o.locale,slug:o.item.product.slug}),class:"font-semibold text-sushi-silver hover:text-sushi-gold transition-colors block truncate"},{default:_(()=>[k(r(o.item.product.name),1)]),_:1},8,["href"]),e("p",re,r(o.item.product.price)+" "+r(o.item.product.currency),1)])]),e("div",le,[e("div",oe,[e("button",{onClick:b[0]||(b[0]=w=>h.$emit("decrement")),class:"px-2 sm:px-3 py-2 bg-sushi-dark hover:bg-sushi-red/40 text-sushi-gold font-bold transition-colors text-lg"}," − "),e("span",ie,r(o.item.quantity),1),e("button",{onClick:b[1]||(b[1]=w=>h.$emit("increment")),class:"px-2 sm:px-3 py-2 bg-sushi-dark hover:bg-sushi-red/40 text-sushi-gold font-bold transition-colors text-lg"}," + ")]),e("div",ne,[e("p",de,r(a.value)+" "+r(o.item.product.currency),1)]),e("button",{onClick:b[2]||(b[2]=w=>h.$emit("remove")),class:"text-red-400 hover:text-red-300 p-2 transition-colors flex-shrink-0",title:"Удалить"},b[3]||(b[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]))])])]))}},ae={class:"lg:col-span-1"},me={class:"bg-sushi-dark/50 border border-sushi-first rounded-lg p-4 sm:p-6 lg:sticky lg:top-24"},ce={class:"space-y-2 mb-4 max-h-[200px] overflow-y-auto custom-scrollbar"},pe={class:"flex-grow min-w-0 pr-2"},ve={class:"truncate block"},xe={class:"text-xs text-sushi-silver/60"},he={class:"font-medium text-sushi-gold flex-shrink-0"},be={class:"space-y-3 mb-6"},fe={class:"flex justify-between text-sushi-silver/80 text-sm sm:text-base"},ge={class:"flex justify-between text-sushi-silver/80 text-sm sm:text-base"},ye={key:0,class:"text-sushi-gold font-medium"},ke={key:1,class:"text-sushi-silver"},we={key:0,class:"text-xs text-sushi-gold/80 bg-sushi-first/20 rounded p-2"},$e={class:"border-t border-sushi-first pt-3"},Ce={class:"flex justify-between items-center"},qe={class:"text-xl sm:text-2xl font-bold text-sushi-gold"},Me={__name:"CartSummary",props:{items:{type:Array,required:!0},totalItems:{type:Number,required:!0},totalPrice:{type:[Number,String],required:!0},currency:{type:String,required:!0},locale:{type:String,required:!0},deliveryCost:{type:Number,required:!0},isFreeDelivery:{type:Boolean,required:!0},amountUntilFree:{type:[Number,String],required:!0},totalWithDelivery:{type:[Number,String],required:!0}},emits:["checkout","clear"],setup(o){return(d,a)=>(n(),u("div",ae,[e("div",me,[a[5]||(a[5]=e("h3",{class:"text-xl font-bold text-sushi-silver mb-4"},"Ваш заказ",-1)),e("div",ce,[(n(!0),u(I,null,B(o.items,h=>(n(),u("div",{key:h.product.id,class:"flex justify-between items-center text-sm text-sushi-silver/80 py-2 border-b border-sushi-first/30"},[e("div",pe,[e("span",ve,r(h.product.name),1),e("span",xe,r(h.quantity)+" × "+r(h.product.price)+" "+r(o.currency),1)]),e("span",he,r((h.product.price*h.quantity).toFixed(2))+" "+r(o.currency),1)]))),128))]),a[6]||(a[6]=e("div",{class:"border-t border-sushi-first my-4"},null,-1)),e("div",be,[e("div",fe,[e("span",null,"Товары ("+r(o.totalItems)+")",1),e("span",null,r(o.totalPrice)+" "+r(o.currency),1)]),e("div",ge,[a[2]||(a[2]=e("span",null,"Доставка",-1)),o.isFreeDelivery?(n(),u("span",ye,"Бесплатно")):(n(),u("span",ke,r(o.deliveryCost)+" "+r(o.currency),1))]),!o.isFreeDelivery&&o.amountUntilFree>0?(n(),u("div",we," 💡 Добавьте ещё "+r(o.amountUntilFree)+" "+r(o.currency)+" для бесплатной доставки ",1)):g("",!0),e("div",$e,[e("div",Ce,[a[3]||(a[3]=e("span",{class:"text-base sm:text-lg font-semibold text-sushi-silver"},"К оплате:",-1)),e("span",qe,r(o.totalWithDelivery)+" "+r(o.currency),1)])])]),e("button",{onClick:a[0]||(a[0]=h=>d.$emit("checkout")),class:"block w-full bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark py-3 rounded-lg font-medium text-center transition-colors mb-3"}," Оформить заказ "),M(x(S),{href:d.route("home",{locale:o.locale}),class:"block w-full bg-sushi-first hover:bg-sushi-first/80 text-sushi-silver border border-sushi-dark py-3 rounded-lg font-medium text-center transition-colors"},{default:_(()=>a[4]||(a[4]=[k(" Продолжить покупки ",-1)])),_:1,__:[4]},8,["href"]),e("button",{onClick:a[1]||(a[1]=h=>d.$emit("clear")),class:"w-full mt-4 text-red-400 hover:text-red-300 text-sm underline transition-colors"}," Очистить корзину ")])]))}},Ve=P(Me,[["__scopeId","data-v-8e6713f1"]]),T={1:1,7:1,20:2,27:2,30:2,31:2,32:2,33:2,34:2,36:2,39:2,40:2,41:2,43:2,44:2,45:2,46:2,47:2,48:2,49:2,51:2,52:2,53:2,54:2,55:2,56:2,57:2,58:2,60:2,61:2,62:2,63:2,64:2,65:2,66:2,81:2,82:2,84:2,86:2,90:2,91:2,92:2,93:2,94:2,95:2,98:2,212:3,213:3,216:3,218:3,220:3,221:3,222:3,223:3,224:3,225:3,226:3,227:3,228:3,229:3,230:3,231:3,232:3,233:3,234:3,235:3,236:3,237:3,238:3,239:3,240:3,241:3,242:3,243:3,244:3,245:3,246:3,248:3,249:3,250:3,251:3,252:3,253:3,254:3,255:3,256:3,257:3,258:3,260:3,261:3,262:3,263:3,264:3,265:3,266:3,267:3,268:3,269:3,290:3,291:3,297:3,298:3,299:3,350:3,351:3,352:3,353:3,354:3,355:3,356:3,357:3,358:3,359:3,370:3,371:3,372:3,373:3,374:3,375:3,376:3,377:3,378:3,380:3,381:3,382:3,383:3,385:3,386:3,387:3,389:3,420:3,421:3,423:3,500:3,501:3,502:3,503:3,504:3,505:3,506:3,507:3,508:3,509:3,590:3,591:3,592:3,593:3,594:3,595:3,596:3,597:3,598:3,599:3,670:3,672:3,673:3,674:3,675:3,676:3,677:3,678:3,679:3,680:3,681:3,682:3,683:3,685:3,686:3,687:3,688:3,689:3,690:3,691:3,692:3,850:3,852:3,853:3,855:3,856:3,880:3,886:3,960:3,961:3,962:3,963:3,964:3,965:3,966:3,967:3,968:3,970:3,971:3,972:3,973:3,974:3,975:3,976:3,977:3,992:3,993:3,994:3,995:3,996:3,998:3};function Ne(o=""){const d=N(o),a=m=>{if(m.length===0)return 0;if(T[m[0]])return T[m[0]];if(m.length>=2){const s=m.slice(0,2);if(T[s])return T[s]}if(m.length>=3){const s=m.slice(0,3);if(T[s])return T[s]}return 3},h=m=>{const s=m.replace(/\D/g,"");if(s.length===0)return"";const c=a(s);let p="+";if(s.length<=c)p+=s;else{p+=s.slice(0,c)+" ";const v=s.slice(c);v.length<=2?p+=v:v.length<=5?p+=v.slice(0,2)+" "+v.slice(2):v.length<=8?p+=v.slice(0,2)+" "+v.slice(2,5)+" "+v.slice(5):p+=v.slice(0,2)+" "+v.slice(2,5)+" "+v.slice(5,8)+" "+v.slice(8,11)}return p};return{formattedValue:d,handleInput:m=>{const s=m.target.selectionStart,c=d.value,p=m.target.value,v=h(p);d.value=v,setTimeout(()=>{if(m.target){let $=s;v.length-c.length>1?$=s+(v.length-c.length):v.length<c.length&&s>0&&c[s]===" "&&($=s-1),$=Math.min(Math.max(0,$),v.length),m.target.setSelectionRange($,$)}},0)},getCleanValue:()=>{const m=d.value.replace(/\D/g,"");return m?"+"+m:""},isValid:()=>d.value.replace(/\D/g,"").length>=10}}const De={class:"p-4 sm:p-6"},Te={class:"bg-sushi-first/30 border border-sushi-gold/30 rounded-lg p-3 sm:p-4 mb-6"},_e={class:"flex justify-between items-center flex-wrap gap-2"},Se={class:"text-xl sm:text-2xl font-bold text-sushi-gold"},Ie={class:"text-xs sm:text-sm text-sushi-silver/60 mt-2"},Fe={key:0,class:"bg-red-500/10 border border-red-400 rounded-lg p-4 mb-6"},Ue={class:"text-red-400 font-medium"},je={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Pe={key:0,class:"text-red-400 text-xs mt-1"},Be=["value"],Ee={key:0,class:"text-red-400 text-xs mt-1"},We={key:0,class:"text-red-400 text-xs mt-1"},Oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ze={key:0,class:"text-red-400 text-xs mt-1"},Le={key:0,class:"bg-sushi-first/30 border border-sushi-gold/30 rounded-lg p-4"},Re={key:1,class:"space-y-4 bg-sushi-first/10 border border-sushi-first rounded-lg p-4"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ge={key:0,class:"text-red-400 text-xs mt-1"},Qe={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},He={class:"sm:col-span-2"},Je=["required"],Ke={key:0,class:"text-red-400 text-xs mt-1"},Xe=["required"],Ye={key:0,class:"text-red-400 text-xs mt-1"},Ze={key:0,class:"space-y-4"},es=["required"],ss={key:0,class:"text-red-400 text-xs mt-1"},ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},rs=["required"],ls={key:0,class:"text-red-400 text-xs mt-1"},os={key:1,class:"text-xs text-sushi-silver/50 mt-1"},is=["required"],ns={key:0,class:"text-red-400 text-xs mt-1"},ds={key:1,class:"text-xs text-sushi-silver/50 mt-1"},us={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},as={key:0,class:"text-red-400 text-xs mt-1"},ms={key:0,class:"text-red-400 text-xs mt-1"},cs={class:"flex flex-col sm:flex-row gap-3 pt-4"},ps=["disabled"],vs={__name:"CheckoutModal",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(o,{emit:d}){const a=o,h=d,b=E(),w=Ne(),q=N(""),m=N({}),s=N({name:"",email:"",deliveryMethod:"pickup",addressType:"apartment",address:"",houseNumber:"",apartmentNumber:"",entrance:"",floor:"",comment:"",payment:"cash"}),c=N(!1),p=N(!1);z(()=>a.isOpen,C=>{C?(document.body.style.overflow="hidden",p.value=!1):document.body.style.overflow=""});const v=U(()=>{const C=b.totalItems,t=C%10,l=C%100;return l>=11&&l<=19?"товаров":t===1?"товар":t>=2&&t<=4?"товара":"товаров"}),$=()=>{p.value=!0,setTimeout(()=>{h("close")},250)},i=C=>m.value[C]?m.value[C][0]:null,O=async()=>{if(m.value={},!w.isValid()){q.value="Введите корректный номер телефона (минимум 10 цифр)";return}q.value="",c.value=!0;const C=b.items.map(l=>({id:l.product.id,name:l.product.name,price:parseFloat(l.product.price),quantity:l.quantity})),t={customer:{name:s.value.name,phone:w.getCleanValue(),email:s.value.email},delivery:{method:s.value.deliveryMethod,...s.value.deliveryMethod==="delivery"&&{addressType:s.value.addressType,address:s.value.address,houseNumber:s.value.houseNumber,...s.value.addressType==="apartment"&&{apartmentNumber:s.value.apartmentNumber,entrance:s.value.entrance,floor:s.value.floor}}},payment:s.value.payment,comment:s.value.comment,items:C,total:parseFloat(b.totalPrice),deliveryCost:parseFloat(b.deliveryCost),totalWithDelivery:parseFloat(b.totalWithDelivery),currency:b.currency};W.post(route("order.checkout"),t,{preserveScroll:!0,onSuccess:()=>{m.value={},b.clearCart(),s.value={name:"",email:"",deliveryMethod:"pickup",addressType:"apartment",address:"",houseNumber:"",apartmentNumber:"",entrance:"",floor:"",comment:"",payment:"cash"},w.formattedValue.value="",q.value="",$(),alert("Заказ успешно оформлен! Мы свяжемся с вами в ближайшее время.")},onError:l=>{m.value=l,console.error("Ошибки валидации:",l)},onFinish:()=>{c.value=!1}})};return(C,t)=>(n(),F(L,{"is-visible":o.isOpen,"z-index":9999,onClose:$},{default:_(()=>[o.isOpen?(n(),u("div",{key:0,class:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",onClick:$},[e("div",{onClick:t[15]||(t[15]=j(()=>{},["stop"])),class:f(["bg-sushi-dark border border-sushi-gold rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto modal-content",p.value?"closing":""])},[e("div",{class:"flex items-center justify-between p-4 sm:p-6 border-b border-sushi-first"},[t[17]||(t[17]=e("h2",{class:"text-lg sm:text-2xl font-bold text-sushi-silver"},"Оформление заказа",-1)),e("button",{onClick:$,class:"text-sushi-silver/60 hover:text-sushi-gold transition-colors p-1"},t[16]||(t[16]=[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",De,[e("div",Te,[e("div",_e,[t[18]||(t[18]=e("span",{class:"text-sushi-silver/80 text-sm sm:text-base"},"Итого к оплате:",-1)),e("span",Se,r(x(b).totalWithDelivery)+" "+r(x(b).currency),1)]),e("p",Ie,r(x(b).totalItems)+" "+r(v.value),1)]),i("items")?(n(),u("div",Fe,[e("p",Ue,r(i("items")),1)])):g("",!0),e("form",{onSubmit:j(O,["prevent"]),class:"space-y-4"},[e("div",je,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Ваше имя "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.name=l),type:"text",required:"",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("customer.name")?"border-red-400":"border-sushi-dark"]),placeholder:"Иван Петров"},null,2),[[V,s.value.name]]),i("customer.name")?(n(),u("p",Pe,r(i("customer.name")),1)):g("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Телефон "),e("span",{class:"text-red-400"},"*")],-1)),e("input",{value:x(w).formattedValue.value,onInput:t[1]||(t[1]=(...l)=>x(w).handleInput&&x(w).handleInput(...l)),type:"text",required:"",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",q.value||i("customer.phone")?"border-red-400":"border-sushi-dark"]),placeholder:"+373 12 345 678"},null,42,Be),q.value||i("customer.phone")?(n(),u("p",Ee,r(q.value||i("customer.phone")),1)):g("",!0)])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},"Email (опционально)",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.email=l),type:"email",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("customer.email")?"border-red-400":"border-sushi-dark"]),placeholder:"your@email.com"},null,2),[[V,s.value.email]]),i("customer.email")?(n(),u("p",We,r(i("customer.email")),1)):g("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-3"},[k(" Способ получения "),e("span",{class:"text-red-400"},"*")],-1)),e("div",Oe,[e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.deliveryMethod==="pickup"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.deliveryMethod=l),type:"radio",value:"pickup",class:"mr-3 flex-shrink-0",required:""},null,512),[[D,s.value.deliveryMethod]]),t[22]||(t[22]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Самовывоз",-1))],2),e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.deliveryMethod==="delivery"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.deliveryMethod=l),type:"radio",value:"delivery",class:"mr-3 flex-shrink-0",required:""},null,512),[[D,s.value.deliveryMethod]]),t[23]||(t[23]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Доставка",-1))],2)]),i("delivery.method")?(n(),u("p",ze,r(i("delivery.method")),1)):g("",!0)]),s.value.deliveryMethod==="pickup"?(n(),u("div",Le,t[25]||(t[25]=[e("p",{class:"text-sushi-silver font-medium mb-2"},"Адрес самовывоза:",-1),e("p",{class:"text-sushi-silver/80 text-sm mb-1"},"ул. Пушкина, д. 10",-1),e("p",{class:"text-sushi-silver/60 text-xs"},"Время работы: 10:00 - 22:00",-1)]))):g("",!0),s.value.deliveryMethod==="delivery"?(n(),u("div",Re,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-3"},[k(" Тип адреса "),e("span",{class:"text-red-400"},"*")],-1)),e("div",Ae,[e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.addressType==="house"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.addressType=l),type:"radio",value:"house",class:"mr-3 flex-shrink-0"},null,512),[[D,s.value.addressType]]),t[26]||(t[26]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Частный дом",-1))],2),e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.addressType==="apartment"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.addressType=l),type:"radio",value:"apartment",class:"mr-3 flex-shrink-0"},null,512),[[D,s.value.addressType]]),t[27]||(t[27]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Многоквартирный",-1))],2)]),i("delivery.addressType")?(n(),u("p",Ge,r(i("delivery.addressType")),1)):g("",!0)]),e("div",Qe,[e("div",He,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Улица "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.address=l),type:"text",required:s.value.deliveryMethod==="delivery",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("delivery.address")?"border-red-400":"border-sushi-dark"]),placeholder:"ул. Примерная"},null,10,Je),[[V,s.value.address]]),i("delivery.address")?(n(),u("p",Ke,r(i("delivery.address")),1)):g("",!0)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Дом "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.value.houseNumber=l),type:"text",required:s.value.deliveryMethod==="delivery",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("delivery.houseNumber")?"border-red-400":"border-sushi-dark"]),placeholder:"10"},null,10,Xe),[[V,s.value.houseNumber]]),i("delivery.houseNumber")?(n(),u("p",Ye,r(i("delivery.houseNumber")),1)):g("",!0)])]),s.value.addressType==="apartment"?(n(),u("div",Ze,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Квартира "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.apartmentNumber=l),type:"text",required:s.value.deliveryMethod==="delivery"&&s.value.addressType==="apartment",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("delivery.apartmentNumber")?"border-red-400":"border-sushi-dark"]),placeholder:"25"},null,10,es),[[V,s.value.apartmentNumber]]),i("delivery.apartmentNumber")?(n(),u("p",ss,r(i("delivery.apartmentNumber")),1)):g("",!0)]),e("div",ts,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Подъезд "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.entrance=l),type:"text",required:s.value.deliveryMethod==="delivery"&&s.value.addressType==="apartment",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("delivery.entrance")?"border-red-400":"border-sushi-dark"]),placeholder:"1"},null,10,rs),[[V,s.value.entrance]]),i("delivery.entrance")?(n(),u("p",ls,r(i("delivery.entrance")),1)):(n(),u("p",os,"Если нет подъезда — укажите 1"))]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},[k(" Этаж "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.value.floor=l),type:"text",required:s.value.deliveryMethod==="delivery"&&s.value.addressType==="apartment",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors",i("delivery.floor")?"border-red-400":"border-sushi-dark"]),placeholder:"5"},null,10,is),[[V,s.value.floor]]),i("delivery.floor")?(n(),u("p",ns,r(i("delivery.floor")),1)):(n(),u("p",ds,"Если нет этажа — укажите 1"))])])])):g("",!0)])):g("",!0),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-3"},[k(" Способ оплаты "),e("span",{class:"text-red-400"},"*")],-1)),e("div",us,[e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.payment==="cash"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>s.value.payment=l),type:"radio",value:"cash",class:"mr-3 flex-shrink-0",required:""},null,512),[[D,s.value.payment]]),t[34]||(t[34]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Наличными",-1))],2),e("label",{class:f(["flex items-center p-3 bg-sushi-first border rounded-lg cursor-pointer transition-colors",s.value.payment==="card"?"border-sushi-gold bg-sushi-gold/10":"border-sushi-dark hover:border-sushi-gold/50"])},[y(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>s.value.payment=l),type:"radio",value:"card",class:"mr-3 flex-shrink-0",required:""},null,512),[[D,s.value.payment]]),t[35]||(t[35]=e("span",{class:"text-sushi-silver text-sm sm:text-base"},"Картой",-1))],2)]),i("payment")?(n(),u("p",as,r(i("payment")),1)):g("",!0)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-sushi-silver mb-2"},"Комментарий к заказу",-1)),y(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=l=>s.value.comment=l),rows:"3",class:f(["w-full bg-sushi-first border rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-sushi-silver text-sm sm:text-base focus:border-sushi-gold focus:outline-none transition-colors resize-none",i("comment")?"border-red-400":"border-sushi-dark"]),placeholder:"Особые пожелания, время доставки..."},null,2),[[V,s.value.comment]]),i("comment")?(n(),u("p",ms,r(i("comment")),1)):g("",!0)]),e("div",cs,[e("button",{type:"submit",disabled:c.value,class:"w-full sm:flex-1 bg-sushi-gold hover:bg-sushi-gold_op text-sushi-dark py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"},r(c.value?"Отправка...":"Оформить заказ"),9,ps),e("button",{type:"button",onClick:$,class:"w-full sm:flex-1 bg-sushi-first hover:bg-sushi-first/80 text-sushi-silver border border-sushi-dark py-3 rounded-lg font-medium transition-colors text-sm sm:text-base"}," Отмена ")])],32)])],2)])):g("",!0)]),_:1},8,["is-visible"]))}},xs=P(vs,[["__scopeId","data-v-fa60cf82"]]),hs={class:"relative z-20 min-h-screen"},bs={class:"container mx-auto px-4 py-8 max-w-6xl"},fs={class:"mb-8"},gs={class:"text-sushi-silver/60"},ys={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ks={class:"lg:col-span-2 space-y-4"},Cs={__name:"Cart",setup(o){const d=E(),a=R(),h=N(!1),b=U(()=>{const s=d.totalItems,c=s%10,p=s%100;return p>=11&&p<=19?"товаров":c===1?"товар":c>=2&&c<=4?"товара":"товаров"}),w=s=>{confirm("Удалить товар из корзины?")&&d.removeFromCart(s)},q=()=>{confirm("Очистить всю корзину?")&&d.clearCart()},m=s=>{console.log("Заказ отправлен:",s),alert(`Спасибо за заказ, ${s.customer.name}! Мы свяжемся с вами по телефону ${s.customer.phone}`),h.value=!1,d.clearCart(),setTimeout(()=>{W.visit(route("home",{locale:a.props.locale}))},1e3)};return(s,c)=>(n(),u(I,null,[M(x(A),{title:"Корзина"}),M(G,{image:"/images/sushi-pattern.jpg",opacity:.4,speed:.2,"max-height":"100vh"}),M(Q),e("div",hs,[e("div",bs,[e("div",fs,[c[2]||(c[2]=e("h1",{class:"text-3xl font-bold text-sushi-silver mb-2"},"Корзина",-1)),e("p",gs,r(x(d).totalItems)+" "+r(b.value),1)]),x(d).items.length===0?(n(),F(J,{key:0,locale:s.$page.props.locale},null,8,["locale"])):(n(),u("div",ys,[e("div",ks,[(n(!0),u(I,null,B(x(d).items,p=>(n(),F(ue,{key:p.product.id,item:p,locale:s.$page.props.locale,onIncrement:v=>x(d).incrementQuantity(p.product.id),onDecrement:v=>x(d).decrementQuantity(p.product.id),onRemove:v=>w(p.product.id)},null,8,["item","locale","onIncrement","onDecrement","onRemove"]))),128))]),M(Ve,{items:x(d).items,"total-items":x(d).totalItems,"total-price":x(d).totalPrice,currency:x(d).currency,locale:s.$page.props.locale,"delivery-cost":x(d).deliveryCost,"is-free-delivery":x(d).isFreeDelivery,"amount-until-free":x(d).amountUntilFreeDelivery,"total-with-delivery":x(d).totalWithDelivery,onCheckout:c[0]||(c[0]=p=>h.value=!0),onClear:q},null,8,["items","total-items","total-price","currency","locale","delivery-cost","is-free-delivery","amount-until-free","total-with-delivery"])]))])]),M(xs,{"is-open":h.value,onClose:c[1]||(c[1]=p=>h.value=!1),onSubmit:m},null,8,["is-open"])],64))}};export{Cs as default};
